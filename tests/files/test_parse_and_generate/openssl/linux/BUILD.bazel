cc_library(
    linkstatic = True,
    name = "apps",
    srcs = [
        "source/apps/app_rand.c",
        "source/apps/apps.h",
        "source/e_os.h",
        "prebuilt/include/openssl/opensslconf.h",
        "source/include/openssl/opensslv.h",
        "source/include/openssl/e_os2.h",
        "source/include/openssl/crypto.h",
        "source/include/openssl/safestack.h",
        "source/include/openssl/stack.h",
        "source/include/openssl/ossl_typ.h",
        "source/include/openssl/cryptoerr.h",
        "source/include/openssl/symhacks.h",
        "source/include/internal/nelem.h",
        "source/include/openssl/bio.h",
        "source/include/openssl/bioerr.h",
        "source/include/openssl/x509.h",
        "source/include/openssl/buffer.h",
        "source/include/openssl/buffererr.h",
        "source/include/openssl/evp.h",
        "source/include/openssl/evperr.h",
        "source/include/openssl/objects.h",
        "source/include/openssl/obj_mac.h",
        "source/include/openssl/asn1.h",
        "source/include/openssl/asn1err.h",
        "source/include/openssl/bn.h",
        "source/include/openssl/bnerr.h",
        "source/include/openssl/objectserr.h",
        "source/include/openssl/ec.h",
        "source/include/openssl/ecerr.h",
        "source/include/openssl/rsa.h",
        "source/include/openssl/rsaerr.h",
        "source/include/openssl/dsa.h",
        "source/include/openssl/dh.h",
        "source/include/openssl/dherr.h",
        "source/include/openssl/dsaerr.h",
        "source/include/openssl/sha.h",
        "source/include/openssl/x509err.h",
        "source/include/openssl/x509_vfy.h",
        "source/include/openssl/lhash.h",
        "source/include/openssl/pkcs7.h",
        "source/include/openssl/pkcs7err.h",
        "source/include/openssl/conf.h",
        "source/include/openssl/conferr.h",
        "source/include/openssl/txt_db.h",
        "source/include/openssl/engine.h",
        "source/include/openssl/ocsp.h",
        "source/include/openssl/x509v3.h",
        "source/include/openssl/x509v3err.h",
        "source/include/openssl/ocsperr.h",
        "source/include/openssl/err.h",
        "source/include/openssl/rand.h",
        "source/include/openssl/randerr.h",
    ],
    copts = [
        "-fPIC",
        "-pthread",
        "-Wa,--noexecstack",
        "-fno-rtti",
        "-fno-exceptions",
        "-DOPENSSL_USE_NODELETE",
        "-DL_ENDIAN",
        "-DOPENSSL_PIC",
        "-DOPENSSL_CPUID_OBJ",
        "-DOPENSSL_IA32_SSE2",
        "-DOPENSSL_BN_ASM_MONT",
        "-DOPENSSL_BN_ASM_MONT5",
        "-DOPENSSL_BN_ASM_GF2m",
        "-DSHA1_ASM",
        "-DSHA256_ASM",
        "-DSHA512_ASM",
        "-DKECCAK1600_ASM",
        "-DRC4_ASM",
        "-DMD5_ASM",
        "-DAES_ASM",
        "-DVPAES_ASM",
        "-DBSAES_ASM",
        "-DGHASH_ASM",
        "-DECP_NISTZ256_ASM",
        "-DX25519_ASM",
        "-DPADLOCK_ASM",
        "-DPOLY1305_ASM",
        "-DOPENSSLDIR=\"/usr/local/ssl\"",
        "-DENGINESDIR=\".\"",
    ],
    includes = [
        "prebuilt",
        "prebuilt/include",
        "source",
        "source/include",
    ],
    linkopts = [
    ],
    deps = [
    ],
)
cc_binary(
    linkshared = True,
    linkstatic = False,
    name = "openssl_1_1",
    srcs = [
        "source/initialize.cpp",
        "source/include/openssl/crypto.h",
        "source/include/openssl/e_os2.h",
        "prebuilt/include/openssl/opensslconf.h",
        "source/include/openssl/opensslv.h",
        "source/include/openssl/safestack.h",
        "source/include/openssl/stack.h",
        "source/include/openssl/ossl_typ.h",
        "source/include/openssl/cryptoerr.h",
        "source/include/openssl/symhacks.h",
        "source/include/openssl/rsa.h",
        "source/include/openssl/asn1.h",
        "source/include/openssl/bio.h",
        "source/include/openssl/bioerr.h",
        "source/include/openssl/asn1err.h",
        "source/include/openssl/bn.h",
        "source/include/openssl/bnerr.h",
        "source/include/openssl/rsaerr.h",
        "source/include/openssl/evp.h",
        "source/include/openssl/evperr.h",
        "source/include/openssl/objects.h",
        "source/include/openssl/obj_mac.h",
        "source/include/openssl/objectserr.h",
        "source/include/openssl/err.h",
        "source/include/openssl/lhash.h",
        "source/include/openssl/rand.h",
        "source/include/openssl/randerr.h",
        "source/include/openssl/ssl.h",
        "source/include/openssl/comp.h",
        "source/include/openssl/comperr.h",
        "source/include/openssl/x509.h",
        "source/include/openssl/buffer.h",
        "source/include/openssl/buffererr.h",
        "source/include/openssl/ec.h",
        "source/include/openssl/ecerr.h",
        "source/include/openssl/dsa.h",
        "source/include/openssl/dh.h",
        "source/include/openssl/dherr.h",
        "source/include/openssl/dsaerr.h",
        "source/include/openssl/sha.h",
        "source/include/openssl/x509err.h",
        "source/include/openssl/x509_vfy.h",
        "source/include/openssl/pkcs7.h",
        "source/include/openssl/pkcs7err.h",
        "source/include/openssl/pem.h",
        "source/include/openssl/pemerr.h",
        "source/include/openssl/hmac.h",
        "source/include/openssl/async.h",
        "source/include/openssl/asyncerr.h",
        "source/include/openssl/ct.h",
        "source/include/openssl/cterr.h",
        "source/include/openssl/sslerr.h",
        "source/include/openssl/ssl2.h",
        "source/include/openssl/ssl3.h",
        "source/include/openssl/tls1.h",
        "source/include/openssl/dtls1.h",
        "source/include/openssl/srtp.h",
        "source/ssl.c",
        "prebuilt/crypto/aes/aes-x86_64.s",
    ],
    copts = [
        "-pthread",
        "-fno-rtti",
        "-fno-exceptions",
        "-Wa,--noexecstack",
        "-DOPENSSL_USE_NODELETE",
        "-DL_ENDIAN",
        "-DOPENSSL_PIC",
        "-DOPENSSL_CPUID_OBJ",
        "-DOPENSSL_IA32_SSE2",
        "-DOPENSSL_BN_ASM_MONT",
        "-DOPENSSL_BN_ASM_MONT5",
        "-DOPENSSL_BN_ASM_GF2m",
        "-DSHA1_ASM",
        "-DSHA256_ASM",
        "-DSHA512_ASM",
        "-DKECCAK1600_ASM",
        "-DRC4_ASM",
        "-DMD5_ASM",
        "-DAES_ASM",
        "-DVPAES_ASM",
        "-DBSAES_ASM",
        "-DGHASH_ASM",
        "-DECP_NISTZ256_ASM",
        "-DX25519_ASM",
        "-DPADLOCK_ASM",
        "-DPOLY1305_ASM",
        "-DOPENSSLDIR=\"/usr/local/ssl\"",
        "-DENGINESDIR=\".\"",
        # c_flags
        "-fPIC",
    ],
    includes = [
        # c_include_dirs
        "prebuilt",
        "prebuilt/crypto/include",
        "prebuilt/include",
        "source",
        "source/crypto/include",
        "source/include",
    ],
    linkopts = [
        "-pthread",
        "-Wl,-z,noexecstack",
        "-Wl,-z,relro",
        "-Wl,-z,now",
        "-static-libstdc++",
        "-static-libgcc",
        "-Wl,-znodelete",
        "-Wl,--version-script=$(location prebuilt/libcrypto.map.lds)",
        "-ldl",
    ],
    deps = [
        "prebuilt/libcrypto.map.lds",
    ],
)
cc_binary(
    linkstatic = False,
    name = "openssl",
    srcs = [
        "source/apps/asn1pars.c",
        "source/apps/apps.h",
        "source/e_os.h",
        "prebuilt/include/openssl/opensslconf.h",
        "source/include/openssl/opensslv.h",
        "source/include/openssl/e_os2.h",
        "source/include/openssl/crypto.h",
        "source/include/openssl/safestack.h",
        "source/include/openssl/stack.h",
        "source/include/openssl/ossl_typ.h",
        "source/include/openssl/cryptoerr.h",
        "source/include/openssl/symhacks.h",
        "source/include/internal/nelem.h",
        "source/include/openssl/bio.h",
        "source/include/openssl/bioerr.h",
        "source/include/openssl/x509.h",
        "source/include/openssl/buffer.h",
        "source/include/openssl/buffererr.h",
        "source/include/openssl/evp.h",
        "source/include/openssl/evperr.h",
        "source/include/openssl/objects.h",
        "source/include/openssl/obj_mac.h",
        "source/include/openssl/asn1.h",
        "source/include/openssl/asn1err.h",
        "source/include/openssl/bn.h",
        "source/include/openssl/bnerr.h",
        "source/include/openssl/objectserr.h",
        "source/include/openssl/ec.h",
        "source/include/openssl/ecerr.h",
        "source/include/openssl/rsa.h",
        "source/include/openssl/rsaerr.h",
        "source/include/openssl/dsa.h",
        "source/include/openssl/dh.h",
        "source/include/openssl/dherr.h",
        "source/include/openssl/dsaerr.h",
        "source/include/openssl/sha.h",
        "source/include/openssl/x509err.h",
        "source/include/openssl/x509_vfy.h",
        "source/include/openssl/lhash.h",
        "source/include/openssl/pkcs7.h",
        "source/include/openssl/pkcs7err.h",
        "source/include/openssl/conf.h",
        "source/include/openssl/conferr.h",
        "source/include/openssl/txt_db.h",
        "source/include/openssl/engine.h",
        "source/include/openssl/ocsp.h",
        "source/include/openssl/x509v3.h",
        "source/include/openssl/x509v3err.h",
        "source/include/openssl/ocsperr.h",
        "prebuilt/apps/progs.h",
        "source/include/openssl/err.h",
        "source/include/openssl/pem.h",
        "source/include/openssl/pemerr.h",
        "source/include/openssl/asn1t.h",
    ],
    copts = [
        "-pthread",
        "-Wa,--noexecstack",
        "-fno-rtti",
        "-fno-exceptions",
    ],
    includes = [
        "prebuilt",
        "prebuilt/include",
        "prebuilt/apps",
        "source",
        "source/include",
    ],
    linkopts = [
        "-pthread",
        "-Wl,-z,noexecstack",
        "-Wl,-z,relro",
        "-Wl,-z,now",
        "-static-libstdc++",
        "-static-libgcc",
        "-ldl",
    ],
    deps = [
        ":apps",
        ":openssl_1_1",
    ],
)
